<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estatus de Caso en Línea</title>
    <link rel="icon" href="logo.png" type="image/png">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FFFFFF;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            background-image: url('channel.png');
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
        }

        #verificar-caso {
            width: 100%;
            max-width: 920px;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .header, .footer {
            width: 100%;
            max-width: 900px;
            background-color: #f8f9fa;
            padding: 10px 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .header img {
            height: 50px;
        }

        .header nav a, .footer a {
            margin: 0 15px;
            text-decoration: none;
            color: #007bff;
        }

        .header nav a:hover, .footer a:hover {
            text-decoration: underline;
        }

        .footer {
            background: linear-gradient(to right, #0056b3, #FFFFFF);
            color: Blue;
            text-align: center;
        }

        .footer img {
            height: 200px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }

        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            color: #fff;
        }

        button:first-of-type {
            background-color: #007bff;
            margin-right: 10px;
        }

        button:last-of-type {
            background-color: #6c757d;
        }

        button:hover {
            opacity: 0.9;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #mensaje-resultado {
            margin-top: 10px;
            font-weight: bold;
            color: #d9534f;
            text-align: center;
        }

        .captcha-container {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .captcha-image {
            font-size: 24px;
            font-weight: bold;
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
        }

        .captcha-input {
            padding: 1px;
            margin-bottom: 1px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div>
            <img src="DHS_cis_W (1).svg" alt="Logo">
            <nav>
                <a href="es.html">Temas</a>
                <a href="es.html">Formularios</a>
                <a href="es.html">Noticias</a>
                <a href="es.html">Ciudadanía</a>
                <a href="es.html">Residencia Permanente</a>
                <a href="es.html">Leyes</a>
                <a href="es.html">Herramientas</a>
                <a href="es.html">Contáctenos</a>
            </nav>
        </div>
    </div>

    <div id="verificar-caso">
        <div class="header">
            <img src="DHS_cis_W (1).svg" alt="Logo">
            <h2>Verificar Estado de Caso</h2>
        </div>
        <p>Utilice esta herramienta para administrar todas sus solicitudes y peticiones.</p>
        <p>
            El número de recibo es un identificador único de 13 caracteres que se compone de tres letras y 10 números.
            Omita los guiones (-) al ingresar un número de recibo. Sin embargo, puede incluir todos los demás caracteres,
            incluidos los asteriscos (*) si aparecen en su notificación como parte del número de recibo. Cuando se ingresa
            un número de recibo y la contraseña de seguridad, el botón "Verificar Estado" se habilitará y podrá verificar
            el estado.
        </p>

        <label for="numero-recibo">Ingrese el Número de Su Caso:</label>
        <input type="text" id="numero-recibo" name="numero-recibo" placeholder="Ejemplo EAC1234567890">

        <!-- CAPTCHA -->
        <div class="captcha-container">
            <div id="captcha-image" class="captcha-image"></div>
            <input type="text" id="captcha-input" class="captcha-input" placeholder="Ingrese el texto del CAPTCHA">
            <button type="button" onclick="generarCaptcha()">Generar CAPTCHA</button>
        </div>

        <button onclick="verificarEstado()">Verificar Estado</button>
        <button onclick="limpiarBusqueda()">Limpiar Búsqueda</button>

        <div id="mensaje-resultado"></div>
        <table id="tabla-resultados">
            <thead>
                <tr>
                    <th>Número de Recibo</th>
                    <th>Tipo de Proceso</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="footer">
        <img src="C:\Users\nikop\OneDrive\Documentos\Clonar\www.uscis.gov\DHS_cis_W (1).svg" alt="Logo">
        <nav>
            <a href="#">Acerca de USCIS</a>
            <a href="#">Accesibilidad</a>
            <a href="#">Ley de Libertad de Información</a>
            <a href="#">Mapa del Sitio</a>
            <a href="#">Oficina del Inspector General</a>
            <a href="#">NO CURRENT ADVISORIES</a>
        </nav>
    </div>

    <script>
        let casos = {};
        let captchaTexto;

        document.addEventListener("DOMContentLoaded", function () {
            const tiposProceso = ["Ajuste de Estatus", "Ciudadanía", "Petición Familiar", "Visa de Trabajo", "Asilo", "Residencia Permanente"];
            const estados = ["Recibido", "En Proceso", "Aprobado", "En Espera de Evidencia", "Decisión Tomada", "Tarjeta Recibida"];

            const generarNumeroRecibo = () => {
                const letras = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                const numeros = "0123456789";
                let recibo = "";
                for (let i = 0; i < 3; i++) {
                    recibo += letras.charAt(Math.floor(Math.random() * letras.length));
                }
                for (let i = 0; i < 10; i++) {
                    recibo += numeros.charAt(Math.floor(Math.random() * numeros.length));
                }
                return recibo;
            };

            const generarCaso = () => {
                return {
                    tipo: tiposProceso[Math.floor(Math.random() * tiposProceso.length)],
                    estado: estados[Math.floor(Math.random() * estados.length)]
                };
            };

            // Agregar caso específico
            casos["CES1110586079"] = {
                tipo: "Permiso de trabajo",
                estado: "Esperando audiencia"
            };

            // Generar 20 casos de ejemplo
            for (let i = 0; i < 20; i++) {
                let numeroRecibo = generarNumeroRecibo();
                while (casos[numeroRecibo]) {
                    numeroRecibo = generarNumeroRecibo(); // Asegurarse de que no haya duplicados
                }
                casos[numeroRecibo] = generarCaso();
            }

            const tablaResultados = document.getElementById("tabla-resultados");
            const cuerpoTabla = tablaResultados.getElementsByTagName('tbody')[0];

            // Agregar datos de ejemplo a la tabla
            for (const numeroRecibo in casos) {
                const caso = casos[numeroRecibo];
                const nuevaFila = cuerpoTabla.insertRow();
                nuevaFila.insertCell().textContent = numeroRecibo;
                nuevaFila.insertCell().textContent = caso.tipo;
                nuevaFila.insertCell().textContent = caso.estado;
            }

            tablaResultados.style.display = "table"; // Mostrar la tabla

            // Generar CAPTCHA inicial
            generarCaptcha();
        });

        function generarCaptcha() {
            const caracteres = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
            captchaTexto = "";
            for (let i = 0; i < 6; i++) {
                captchaTexto += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
            }
            document.getElementById("captcha-image").textContent = captchaTexto;
        }

        function verificarEstado() {
            const numeroRecibo = document.getElementById("numero-recibo").value;
            const captchaInput = document.getElementById("captcha-input").value;
            const tablaResultados = document.getElementById("tabla-resultados");
            const cuerpoTabla = tablaResultados.getElementsByTagName('tbody')[0];
            const mensajeResultado = document.getElementById("mensaje-resultado");

            // Validar CAPTCHA
            if (captchaInput !== captchaTexto) {
                mensajeResultado.textContent = "CAPTCHA incorrecto. Inténtelo de nuevo.";
                return;
            }

            // Borrar filas existentes en el cuerpo de la tabla
            while (cuerpoTabla.rows.length > 0) {
                cuerpoTabla.deleteRow(0);
            }

            if (casos[numeroRecibo]) {
                // Si se encuentra el número de recibo, se agrega una nueva fila con los datos del caso y se muestra la tabla
                const nuevaFila = cuerpoTabla.insertRow();
                nuevaFila.insertCell().textContent = numeroRecibo;
                nuevaFila.insertCell().textContent = casos[numeroRecibo].tipo;
                nuevaFila.insertCell().textContent = casos[numeroRecibo].estado;
                tablaResultados.style.display = "table"; // Mostrar la tabla
                mensajeResultado.textContent = ""; // Limpiar el mensaje de error si existía
            } else {
                // Si no se encuentra, se muestra un mensaje y los datos de ejemplo
                mensajeResultado.textContent = "Número de recibo no encontrado. Mostrando datos de ejemplo.";
                for (const numeroRecibo in casos) {
                    const caso = casos[numeroRecibo];
                    const nuevaFila = cuerpoTabla.insertRow();
                    nuevaFila.insertCell().textContent = numeroRecibo;
                    nuevaFila.insertCell().textContent = caso.tipo;
                    nuevaFila.insertCell().textContent = caso.estado;
                }
                tablaResultados.style.display = "table"; // Mostrar la tabla
            }
        }

        function limpiarBusqueda() {
            document.getElementById("numero-recibo").value = "";
            document.getElementById("captcha-input").value = "";
            document.getElementById("mensaje-resultado").textContent = "";
            const tablaResultados = document.getElementById("tabla-resultados");
            const cuerpoTabla = tablaResultados.getElementsByTagName('tbody')[0];

            // Borrar filas existentes en el cuerpo de la tabla
            while (cuerpoTabla.rows.length > 0) {
                cuerpoTabla.deleteRow(0);
            }

            // Mostrar nuevamente los casos de ejemplo
            for (const numeroRecibo in casos) {
                const caso = casos[numeroRecibo];
                const nuevaFila = cuerpoTabla.insertRow();
                nuevaFila.insertCell().textContent = numeroRecibo;
                nuevaFila.insertCell().textContent = caso.tipo;
                nuevaFila.insertCell().textContent = caso.estado;
            }
            tablaResultados.style.display = "table"; // Mostrar la tabla

            // Generar nuevo CAPTCHA
            generarCaptcha();
        }
    </script>
</body>
</html>
